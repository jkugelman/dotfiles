#!/bin/bash

if (( $# != 1 )); then
    echo "Usage: $0 DIR" >&2
    exit 1
fi

if ! [[ -d $1 && -w $1 ]]; then
    echo "\`$1' not a writable directory" >&2
    exit 2
fi

find /usr -regextype posix-extended -iregex '.*\.(png|gif)' | while read FILE; do
    cp "$FILE" "$1/$(sed 's|/|_|g' <<< "$FILE")"
done
